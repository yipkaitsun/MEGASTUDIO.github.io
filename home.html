<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="./css/slick-theme.css" />
    <link rel="stylesheet" href="./css/slick.css" />
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <!-- MyApi -->
    <script src="./js/api.js"></script>
    <!-- BackendApi -->
    <script src="./js/AsynctTask.js"></script>
    <script src="./js/ResizeSensor.js"></script>
    <script src="./js/slick.js"></script>
    <link rel="stylesheet" href="./css/mystyle.css" />

    <script>
        var response = null;
        $(function () {

            $("#header-container").load("header.html", function () {
                var page = $('#header-container').data("page");
                var selector = "#nevigation > div:nth-child(" + page + ") > a";
                $("head").append('<style type="text/css">' + selector + ' {color:grey;}</style>');
            });
            data = {
                "path": "https://api.vexpo.ai/megastore/home",
            }
            var asyncTask = new AsyncTask(data);
            asyncTask.post().then(
                function (response) {
                    var itemsProcessed = 0;
                    response.content.slide.forEach(function (slide) {
                        $(".slick-banner").append('<div class="item" style="background-image:url(' + slide.src + ')"></div>').ready(function () {
                            itemsProcessed++;
                            if (itemsProcessed === response.content.slide.length) {
                                $('.slick-banner').slick({
                                    dots: true,
                                    infinite: true,
                                    speed: 300,
                                    slidesToShow: 1,
                                    adaptiveHeight: true
                                });
                            }
                        });
                    });

                    response.content.product.forEach((product, index) => {
                        if (product.name_zh.length > 30)
                            $("#FeactureProduct").append('<a href ="./product.html?id=' + product.id + '" class="homegrid grid' + (index + 1) + '"><div class="thumbnail" style="background-image:url(' + product.thumbnail + ');background-size:cover; background-position:center;"/><p>' + product.name_zh.substring(0, 30) + " ... " + '</p><p>$' + product.price + '</p></a>');
                        else
                            $("#FeactureProduct").append('<a href ="./product.html?id=' + product.id + '" class="homegrid grid' + (index + 1) + '"><div class="thumbnail" style="background-image:url(' + product.thumbnail + ');background-size:cover ; background-position:center;"/><p>' + product.name_zh + '</p><p>$' + product.price + '</p></a>');
                    });

                    response.content.article.forEach((article, index) => {
                        $("#Blog").append('<a href="./article.html?id=' + article.id + '" class="homegrid grid' + (index + 1) + '"><div class="thumbnail" style="background-image:url(' + article.thumbnail + ');background-size:cover; background-position:center; position:relative;"><div class="layer"><div>' + article.title + '</div></div></div></a>');
                    });

                });

            $("#footer-container").load("footer.html");




        });
    </script>

</head>
<body style="position: unset !important;">

    <div id="header-container" data-page="1"></div>

    <div class="banner">
        <div class="slick-banner" style="width:calc(100% - 40px); margin:auto;"></div>
    </div>
    <div id="FeatureProducts">
        <div class="title">Feature Products</div>
        <div id="FeactureProduct" class="grid-3" style="margin:auto;text-align: center;"></div>
        <Button onclick="Goto('./shop.html')" class="moreButton">More</Button>
    </div>


    <div id="OurBlog">
        <div class="title">Our Blog</div>
        <div id="Blog" class="grid-3" style="margin:auto;text-align: center;"></div>
        <div><Button onclick="Goto('./blog.html')" class="moreButton">More</Button></div>
    </div>

   
        <p class="title">Follow Us</p>
       
    <div id="footer-container"></div>

</body>
</html>
